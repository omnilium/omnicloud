apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: roundcube
    namespace: roundcube
spec:
    interval: 10m0s
    chart:
        spec:
            chart: roundcube
            version: '>=1.11.1 <1.12.0'
            sourceRef:
                kind: HelmRepository
                name: roundcube
                namespace: roundcube
            interval: 1m
    values:
        config:
            skins:
                larry:
                    enabled: true
            plugins:
                managesieve:
                    enabled: true
                    config:
                        host: mx.omnilium.cloud:4190
                contextmenu:
                    enabled: true
            uploadMaxFilesize: 100M
        externalDatabase:
            host: postgres-postgresql.roundcube.svc.cluster.local
            user: roundcube
            password: ENC[AES256_GCM,data:SUc7PBct1EAb17oawh2/p4l4xRMJoQ9DqrPvs8EVnqQ=,iv:mOaIuwqqXBESr9zXlVP91EcdP2mnxLrEpBHaowoUe4k=,tag:pRmAyu8IFjLsuuqe43p4Vg==,type:str]
        imap:
            host: mx.omnilium.cloud
        smtp:
            host: mx.omnilium.cloud
        deployment:
            replicas: 3
            port: 8080
        ingress:
            host: webmail.omni.ms
            class: traefik
            tls:
                secretName: roundcube-tls
            additionalAnnotations:
                cert-manager.io/cluster-issuer: acme
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-10T19:12:23Z"
    mac: ENC[AES256_GCM,data:dFYknYifCniCcE47VadqqQo/nE3BfiIuyx9/2oSJrw8BVW43MZQB09NAhq/ubI6KFkv4k3+0T6szfOqhgvwyqX4XHSsAVKSQdapdOVKZaDthDma/JxYuREG047AvyL7dYRTGr2879nUEtHsXLUiGkDr3asmA08kNhEEMJxozN5g=,iv:ZnFfa98Gk18jfAFhiKohXPrWF/qfCMOLFdqHfH9mPyk=,tag:Mrw2/m+FZJPZ6WlbYrMI7Q==,type:str]
    pgp:
        - created_at: "2024-04-10T19:12:23Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEri8Wn4uiCfDyqOieiU2DBfmUMpp3/6a6h9NeJDOhGl2M
            BLPzOY30wt1X1tJGfIicTLwIVNzYQf6078QdRVnGQIfeS7db57zjIV1TUPgdKsor
            +keLiCzYw5cvkklUMdvkMNRXXoa9xgzz494gVbMDz/+sTNr2yIAJvk/uA5UIqChN
            1C8mx8zw2JS19JvxZPChadRmAQkCEN/0HPDFp/4U0BP1MCOm3lqGx8SfU87pIBlT
            pjxBMqmBuddOxOChUKtb4/wYGZygn9vI1Q3SQAS64ymaxDNN62T0uD2LEZ3fn0Sk
            N+PXMp2WgDc5htmH5MapeAJsP7ppO4vI
            =xj6K
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-10T19:12:23Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwMEZp9WRGHetOI/V7LXsxlZ2TIqLMoppvsOxGxc/4b3g3P4
            OvNKSghqA97azEud/Ck56nVBJYpXTdycznEJx+dXFZcgXQjhemZLYb2PyiNw0x3+
            luLZfXPHZoHXumDq9sqxMAvzllLDoUwwYHAY0cKGsfjLH8/XcSFarFb0L2FG6+gY
            d+Zkk3P+pPpkRjTZMBIFFNRmAQkCEJp9bf7OMKLfCICdBTO93mg5GdbEMlAoOwvD
            vAAdhL2JCiySKzbilCKxBZrLVaToP/FFGV+02fiQNcpU6zC47J7G97x+Hgzm4Bsf
            GPY/bHuLye1IQWNTEDTadpdUda4TFtVX
            =ktZl
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
