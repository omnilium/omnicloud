apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: postgres
    namespace: roundcube
spec:
    interval: 10m0s
    chart:
        spec:
            chart: postgresql
            version: '>=15.2.4 <15.3.0'
            sourceRef:
                kind: HelmRepository
                name: bitnami
                namespace: roundcube
            interval: 1m
    values:
        global:
            postgresql:
                auth:
                    username: roundcube
                    password: ENC[AES256_GCM,data:VBGk397wqBB883Uw1uBjOgd8/45lH4bzKGvwb43ImTU=,iv:pUgjyXcczZcLZGb7zuSQZBEQH2n9FilQV6MDUCVXYxE=,tag:SGUM8hQYj1n48z0YrNNHVg==,type:str]
                    database: roundcube
        auth:
            enablePostgresUser: false
            username: roundcube
            password: ENC[AES256_GCM,data:mjYuceG5JMBHSEnsgTTFB7wQRvciscYH7p0CywYBNN4=,iv:Y3bRl+0ycOeDg7tW/LU0HkVicgzsXFuDtI/9Vjigupg=,tag:lX3vLyx4grPgMuC9tjNkdg==,type:str]
            database: roundcube
            replicationPassword: qusBAtk0mt0p63KYwRytRzRA22JiYC0n
        primary:
            resourcesPreset: medium
            podLabels:
                app.omnilium.local/identifier: postgres-roundcube
            affinity:
                podAntiAffinity:
                    preferredDuringSchedulingIgnoredDuringExecution:
                        - weight: 100
                          podAffinityTerm:
                            labelSelector:
                                matchLabels:
                                    app.omnilium.local/identifier: postgres-roundcube
                            topologyKey: topology.omnilium.local/host
            topologySpreadConstraints:
                - labelSelector: null
                  matchLabels:
                    app.omnilium.local/identifier: postgres-roundcube
                  topologyKey: topology.kubernetes.io/zone
                  maxSkew: 1
                  whenUnsatisfiable: ScheduleAnyway
            persistence:
                storageClass: replicated
                size: 10Gi
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-10T18:45:48Z"
    mac: ENC[AES256_GCM,data:a3dK5b+y9+uvMeCYaUQlrMOQrOt32lE8vWM779HOp1UyTT3UZPFUwtTN+8RrTp+a6BmUlJKlDD9sb6sHZODtHEwJZMXDUr7nKRn6lg6ITBIdniQ9MLy72OtADlJAFsrOYpH5/kXl1QaWaSxF33hqve3ObsttNvebuyCiDBULcTA=,iv:DQkeqJrTPOeWJRIZjFS0ri7aB6trWhDRlRPgwpoQQsA=,tag:esWBOIrqM+am75ywEBaBLg==,type:str]
    pgp:
        - created_at: "2024-04-10T18:45:48Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEnabQextCC4VAgLAVkTfJP43gFJaa28et01R2zP4aeiHQ
            2hojdR79qn+4MFVu0mGOR/qBGYV/0LP6vZdVbm75N+vl/qaN3ZyY2C8P2TZ/bALe
            z953Hj979O4grAdWWrOfMMP28eqQ16t0QwakrlAGnkCcPzDt9hUO3/mNNkRLfGcB
            2j4dE4Y90vuQjujICGS8I9RmAQkCEP7A3sx+Xm03+dOUFoV7WCpROy97xRTnm7ei
            te0mxec1Ai8tBqxlwEsz3a0mx1fJXiOsIoLwm6LiUKCoHr1VFQ76U/wauUR+x0Bx
            ILn5rANwQv3QTtU6Zh/N2zyF0QboD3lB
            =6otD
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-10T18:45:48Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwMETQ4G5jfpvfoHrFYybq1m/1BAkcjH6/PErpYrKea5pwBK
            O8FcGufZ3j8b87nANVoppI5tG81Zq/eScdL3Y4Lx8c4mCbCw63kauBlWIM1zi9P9
            jvmEMkGP14KDLXDbdg3GMA1wna+PYWqn0Vve9uzrgw9PFHYiqTV52xFMB00zYHoo
            0HIdnCbzoOd5NlH5tGdVo9RmAQkCEJ4Ajvwx5Nf7y+R3OYK7F3o/k5XRyHCXovt0
            RM2v108a/tW/efzFsC3/7cOr4xJjLmFCkl4jI/L9nw0o6XbcmfAVWqn6wmXbaY4W
            lNwEPNrZk5vAeCxkMbaxMM1NSCdaS3l9
            =T3kl
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
