apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: minio
    namespace: gitlab
spec:
    interval: 10m0s
    chart:
        spec:
            chart: tenant
            version: '>=5.0.14 <5.1.0'
            sourceRef:
                kind: HelmRepository
                name: minio
                namespace: gitlab
            interval: 1m
    values:
        secrets:
            name: minio-env
            accessKey: gitlab
            secretKey: ENC[AES256_GCM,data:XateIotPSb6k3+gMwJEnlFaqhECmab9OSG/MKpoWLlo=,iv:OyUfuhuCSI4Vjtkc4c2eTL5sCj/QaY3MiLSNoQI4bgg=,tag:sUaticd7O7AQbA5+YUz1oQ==,type:str]
        tenant:
            name: gitlab
            configuration:
                name: minio-env
            pools:
                - name: minio-pool-1
                  volumesPerServer: 1
                  size: 10Gi
                  labels:
                    app.omnilium.local/identifier: minio-gitlab
                  affinity:
                    podAntiAffinity:
                        preferredDuringSchedulingIgnoredDuringExecution:
                            - weight: 100
                              podAffinityTerm:
                                labelSelector:
                                    matchLabels:
                                        app.omnilium.local/identifier: minio-gitlab
                                topologyKey: topology.omnilium.local/host
                  resources: {}
                  topologySpreadConstraints:
                    - labelSelector: null
                      matchLabels:
                        app.omnilium.local/identifier: minio-gitlab
                      topologyKey: topology.kubernetes.io/zone
                      maxSkew: 1
                      whenUnsatisfiable: ScheduleAnyway
            certificate:
                requestAutoCert: false
            buckets:
                - name: gitlab
                  region: hel1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-07T10:08:51Z"
    mac: ENC[AES256_GCM,data:td9CTFXl4kqGAQluG9T4vUcvi96s6sQXkIxMnaEzGfDjsrF1r77HEvhyxg9E9pDOc8Re2kb1vwYL2+wDCRxUBi4YHoFG+wYM/1iqwcBAtNtpL6HuZ4V5CB3qN3q2XPu2rRBjHKhCQl9EFi830nKN5BbmxWNtQhsnADmH7w6NGTo=,iv:uUSYy2jSrnYvqArObJn8/ZzIbBmz71CQFH9ukvEzoIQ=,tag:rdw/jfC+ysritagALzwPEg==,type:str]
    pgp:
        - created_at: "2024-04-07T10:08:51Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEA244F9BeNIQJrnLnLqiQN64cZLC99QImQszoOnowVgcW
            +eN49hSB9vq9atWh1LAUAkipgrWwcNp3Lmd6/sXT1NETe/40M3UkMVp5IuPjdRsP
            fPhm96HM34sPlPicL1GiMEh89V+cpj2VHJHQpnWrG+gWL0wQQW8CYOGxJYvHkkId
            pr32ts/C/yEkX0WQ7GLpq9RmAQkCEHe5F58R5nuATWzc09GB612fIOGwrm27DJkw
            1UDjYVaEGth3qi0GWdxB2OWliH9dYwBRPDAsFGfeI2zlX0Ts6XyIQ3KqkWWFwLML
            CnuaR6wEQLF+l4YP2/3Ok0aDW20zgaaC
            =31Mq
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-07T10:08:51Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwME86EKH3ZhKVkftpi2IEN92SNGYIa+qoA0iD4XqhxMywVZ
            9yRO5ZTQ4J1YuPZoPK5BhOoakfZZw6Czrgwa+bd2UYgVUt2/qd/o2cRKFtXFOn0i
            emUpyRuOyBo27StkxWIsMF0p5STK/5wf68QxrXQeOqtSUAKmyUHDSHuYyeN5x3ew
            VEVb/YjUGmDJl+qH2mYhCNRmAQkCEBCfD1hCHscXExMt5gL1Cqo6k9QbehicCET1
            srGeeileuzP8eKu0OCNaCE9qAY5FwF549GZbdvIVmmrC+vyxl41vmn8kcE/oBI8c
            Q36xbI8Md9cKjFylHckeWyLFTA7gLtUE
            =p2Lt
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(secretKey)$
    version: 3.8.1
