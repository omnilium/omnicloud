apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: minio
    namespace: gitlab
spec:
    interval: 10m0s
    chart:
        spec:
            chart: tenant
            version: '>=5.0.14 <5.1.0'
            sourceRef:
                kind: HelmRepository
                name: minio
                namespace: gitlab
            interval: 1m
    values:
        secrets:
            name: minio-env
            accessKey: gitlab
            secretKey: ENC[AES256_GCM,data:eMjbyhNoqty2raeCuTNv5Qfwwzz5Vp4hChrSaQQG1Oo=,iv:q7LdbxHB3F/l6JRFFxVNwH5+aoZpDzp3yQE9mhIoU4E=,tag:TX9Bo46+e8z+zcgrtMt9yw==,type:str]
        tenant:
            name: gitlab
            configuration:
                name: minio-env
            pools:
                - name: gitlab
                  volumesPerServer: 1
                  size: 10Gi
                  labels:
                    app.omnilium.local/identifier: minio-gitlab
                  affinity:
                    podAntiAffinity:
                        preferredDuringSchedulingIgnoredDuringExecution:
                            - weight: 100
                              podAffinityTerm:
                                labelSelector:
                                    matchLabels:
                                        app.omnilium.local/identifier: minio-gitlab
                                topologyKey: topology.omnilium.local/host
                  resources: {}
                  topologySpreadConstraints:
                    - labelSelector: null
                      matchLabels:
                        app.omnilium.local/identifier: minio-gitlab
                      topologyKey: topology.kubernetes.io/zone
                      maxSkew: 1
                      whenUnsatisfiable: ScheduleAnyway
            certificate:
                requestAutoCert: false
            buckets:
                - name: gitlab
                  region: hel1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-07T10:07:40Z"
    mac: ENC[AES256_GCM,data:e6Dj+B+t0gJTQmKh3rvdv8a00taJAsTWWJ6sBIawigD9HLDhMYsnsRtjR+mmBQP2DQguMwDnEJ1Ucjt1DPC77qbYsDFfvDm44VludpifE3vzBanfk4q+7YGv/PAABOvr3DKA/PoTtCNHJhO3Lw2vFc4V3V24GP+wewWCyaQnWWQ=,iv:G4BQIOiEDvsHcNaiMv710RJDcXDP+xcF1OOt95GS9Ic=,tag:1ADoriDR2nYG9jJo3nmYSA==,type:str]
    pgp:
        - created_at: "2024-04-07T10:07:40Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEMZX+T32J6zgYYhht3U5HP6MK0ZXP5N1LrHRzksmQwgvr
            vCjA7+x64iqpU2DQ8Jd/D3zmM4c2uc4cY0VkhKM3ub940rND5KJ16IkYFINM+UpZ
            e64F/y1L3ozx0oRjfIaAMAXgpmjXmg1yjkaZxv0khZSx96vWP1W7OXLXgQen8Q1Z
            1U5F20RsbdQr8nw5fne/AtRoAQkCEGEClC5+VoHec/3UGMvUpq0rl+5LE1T3adQO
            IhVN2lBzJBX3mrn2izN1QtcfuyenW1nL1hjaHebKW3PYgOwMzuxPuJqRc0gIIlhj
            7UYb8uvftRNXQyzAIwXkdO1Vq0J8A2/GKpM=
            =g7nL
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-07T10:07:40Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwMERz668ollxsgxqjB6yEzmbty864xSy7fn7rpCTTO/qwb8
            qo1FGpoNqnFb3xo/aZoM0nwOdJmrmAcDN6Nx1GlfPp4HaIufH9OwwPRrgjVWocG2
            oIJRA0CLu+GVtCdVkro7MJ5Vlyx1EmbJkysvDverI5hxb6ku5E7N69LANvJmTX+f
            chqYJCrwwctKFKji0LBSCdRoAQkCELqc9NHo4WPvWzG+MAu6mcChSDLBG70BLDxy
            Vk3C5cp5+ik3kUFmCoi6BKIg57ryOlnHqZzhJ9xlA3YXV0ligfL169UWNyjeUThL
            LiJu7UrLo2aN3dHOk6jRAfpjWLF7EI5p4pE=
            =M4NY
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(secretKey)$
    version: 3.8.1
