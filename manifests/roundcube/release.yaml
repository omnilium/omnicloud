apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: roundcube
    namespace: flux-system
spec:
    interval: 10m0s
    timeout: 5m0s
    chart:
        spec:
            chart: roundcube
            version: 1.12.*
            sourceRef:
                kind: HelmRepository
                name: roundcube
            interval: 60m0s
    releaseName: roundcube
    targetNamespace: roundcube
    install:
        remediation:
            retries: 3
        createNamespace: true
    upgrade:
        remediation:
            retries: 3
    values:
        config:
            skins:
                larry:
                    enabled: true
            defaultSkin: larry
            plugins:
                managesieve:
                    enabled: true
                    config:
                        host: mx.omnilium.cloud:4190
                        useTls: true
                contextmenu:
                    enabled: true
            uploadMaxFilesize: 100M
        externalDatabase:
            host: roundcube-cnpg-cluster-rw.roundcube.svc.cluster.local
            user: roundcube
            password: ENC[AES256_GCM,data:nGmIozkkKHfiLK1mLa2rtAKwEBq/6+ng2MCgBCqYV+M=,iv:Npbw2BZ18qQmuTJyMITSnsLTs7f7x+7vJd4r7IHAPVw=,tag:zbPLg0SQwwtJGmCsemenRA==,type:str]
        imap:
            host: mx.omnilium.cloud
        smtp:
            host: mx.omnilium.cloud
        deployment:
            replicas: 3
            port: 8080
        ingress:
            host: webmail.omni.ms
            tls:
                secretName: roundcube-tls
            additionalAnnotations:
                cert-manager.io/cluster-issuer: acme
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-14T18:40:07Z"
    mac: ENC[AES256_GCM,data:bnSZieRWmBUCkziBG1+3rHVo6CYyJ/jEm6lvmU3pQ+m/f6C0eZl5ATUTzWIerw6zq2A0W+q3G7QoNelzqRaolK2qGeHqmXXu6M5qpB6BaxAB1+u9M9dHWytGIrVWkCziRuxDw98RPRn69ch7xzlwjWJYJFRL1l5IotDh9yzKUGE=,iv:X61IVed6gHwfRs/bdD8MNCd/zhyClzJAeK/Mfbs82hk=,tag:in3mP8erMiXCRbBxqfL8Pg==,type:str]
    pgp:
        - created_at: "2024-04-14T18:40:07Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEGuXKrVzsnqRPxL+RrhISvQ+0zBW1xl1obkqdbFI/RaKv
            4Ahz3dv0u9p0gVzgd1Cn9BeKpY3bGkRc2OsajF7kaW+ec7rvZ/i/G9gFMmo/YLO0
            IXLoMSYA7bO2uIziV5SqMDXeYdcc/+hidPAnP4gIfomVsEgIch92PsIyyAql/trR
            ncYNSwBNqHk6gr2RhpKK3dRoAQkCEF5bY6cqwP2BrFnn/hTYx/m0WwrgKWlBqhjM
            1lud26sT4BfCd1Pu8sgWKTZAyOKh2fUV0HwgBS5xKDT94MSD5wz4/hWsW70pwvqV
            a0JVvA3CVzl3/EQrnhn7DOzbWH78FLQzmsE=
            =7zOz
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-14T18:40:07Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwME1yazw4bI2AbwTE1Z+QTOxMNhO8IeW8hEvVbmgwPX7jQw
            IDDX9kXWc1Ub9dpGPIxKXyZ+ivqbB7Apigk+D4BAkuviqdBdn6DE5ThHRBk1uSwN
            qJmXv5o9KpY/Hw0rOBBpMNQ9uoZghIZloFWaIopC7oqQy7MjRc1MCBu4f0eLbMcX
            CqbC75Of1rIYpi2+LFeoUtRoAQkCELG++faNDBF8LW80yz7d0DN4ggI6/eetDYLa
            Qj3TZOQhbSqUkcQG8w/HR/F8CwGjcV76FxED33PItSKVNAo6amTSuIOlRrpZAGHP
            fj8tuZeV3OUkuMGD+D+vOJtK+oLghSae9iU=
            =2tPr
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
