---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: mayastor
  namespace: mayastor-system
spec:
  interval: 10m0s
  chart:
    spec:
      chart: mayastor
      version: ">=2.5.0 <2.6.0"
      sourceRef:
        kind: HelmRepository
        name: mayastor
        namespace: mayastor-system
      interval: 1m
  values:
    # https://github.com/siderolabs/talos/issues/8001#issuecomment-1859079349
    crds:
      jaeger:
        enabled: false
    base:
      metrics:
        enabled: false
    etcd:
      localpvScConfig:
        basePath: "/var/openebs/local/{{ .Release.Name }}/etcd"
    loki-stack:
      enabled: false
      localpvScConfig:
        basePath: "/var/openebs/local/{{ .Release.Name }}/loki"
