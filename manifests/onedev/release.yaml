apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: onedev
    namespace: flux-system
spec:
    interval: 10m0s
    timeout: 5m0s
    chart:
        spec:
            chart: onedev
            version: 10.4.*
            sourceRef:
                kind: HelmRepository
                name: onedev
            interval: 60m0s
    releaseName: onedev
    targetNamespace: onedev
    install:
        remediation:
            retries: 3
        createNamespace: true
    upgrade:
        remediation:
            retries: 3
    values:
        onedev:
            replicas: 3
            initSettings:
                user: admin
                password: ENC[AES256_GCM,data:A9jrKHMeyHJvby0LP4vAYRi1P0wBlFOIpTRfkB+QgkA=,iv:/U/PK71xgE++1YtZNDwjp2MxtxaNFMCrHS6+amKKQ6U=,tag:4DtllvzcD1KHtX9eedAaEg==,type:str]
                email: webmaster@omnilium.cloud
        database:
            external: true
            type: postgresql
            host: google.com
            port: "5432"
            name: onedev
            user: onedev
            password: ENC[AES256_GCM,data:T1Q/PhQH/5qR1NGijMhVwGXtncoEAJEajHQGtai2/wU1LuNHADXnUWSW6VA=,iv:UCy0kr1QJ0asQe1JnUyaEzCGxW1fgrK+PUDXOa3ZR5A=,tag:EADeVJkNOLPMDKapwzDI4A==,type:str]
        podLabels:
            app.omnilium.cloud/identifier: onedev-server
        affinity:
            podAntiAffinity:
                preferredDuringSchedulingIgnoredDuringExecution:
                    - weight: 100
                      podAffinityTerm:
                        labelSelector:
                            matchExpressions:
                                - key: app.omnilium.cloud/identifier
                                  operator: In
                                  values:
                                    - onedev-server
                        topologyKey: topology.omnilium.cloud/host
        persistence:
            size: 32Gi
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-14T12:44:12Z"
    mac: ENC[AES256_GCM,data:DetjkqYTNW57VHJBEjaPf9W3IBGRSsBIbyZ0fPXS1spwcGVFPoMVVyX185p/92Uwvr4dgnmZNup+SmJKzEcsa9Jnbu63ANsqo0Y88D3b7Th8n1GWIUEY42yAZnM+bX2BGRtGIklAyqM8TgRb8iQFN9xeYWAWIhHfOdh5uKuf7P0=,iv:bpLba06kI3vJ8WVkUN6wyyvvgU6/ZIa/bdOTQEmW2es=,tag:3+VG+OTptH6CUufAWRtxYw==,type:str]
    pgp:
        - created_at: "2024-04-14T12:44:12Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwME2wTHcYlhXPRBVLHNOYAVa+QS9dGUBPUBMyRimvzVAeOY
            M3zqaZjQOFr+0mucUReZdiM+8zGwBTxFGnbTFOJthEQLbMy0/l6MPW4QXNKw+Kw7
            1RO21qYVH6NITWi/xAklMBFr6wKEkBksmrsOsmggaDpScN4j4AfujhCdVYbGjfOP
            pXDkI8POqjziuKFHUnfhp9RoAQkCEGxNPec5iwpkXOivxtZZeLE5D2Zx3NJhAbaA
            REYQS50ZV2dIryzQnMwewqNZNZpIfv8GQ552KbLU5xe17vypJj3e+6sLWNARDYd8
            eVi/u51XlDHEBiwCuLkGlsEPQSS4Ozf6ORA=
            =TEG0
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-14T12:44:12Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwMEkyEDbuPldX24zCrm/YsW4RYJkY/nknBXQw74ejOUSwgK
            4IhM18DhnK5VnuOubxiBsFkti0qLeljupRWpExFq1Q24AHlBtIODsU+FQOcdb9mV
            kQIu/AT95GIhBJzVLX5kMCh36pMquEehWPJUlInZRd2CC3KnV+BdaG9SWpLy35aW
            ZCkxgz34BHpME1xkuVPRw9RoAQkCED0uBHQg9rcbJhYVo8kcmJ/Cy1L1Gt3kdprF
            Q5/UMVMHm9xMjb1uLdrwgOtJT61nDfmhg4kHD0UTPLdhQ427cr4J5z8/WjI9qFGQ
            PN1iK4sd0syVTTR5QwxgVjgLfjCTn/Mxv6E=
            =/MtI
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(data|stringData|password)$
    version: 3.8.1
