apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: woodpecker
    namespace: flux-system
spec:
    interval: 10m0s
    timeout: 5m0s
    chart:
        spec:
            chart: woodpecker
            version: 1.2.*
            sourceRef:
                kind: HelmRepository
                name: woodpecker
            interval: 60m0s
    releaseName: woodpecker
    targetNamespace: woodpecker
    install:
        remediation:
            retries: 3
        createNamespace: true
    upgrade:
        remediation:
            retries: 3
    values:
        agent:
            replicaCount: 3
            env:
                WOODPECKER_SERVER: woodpecker-server:9000
                WOODPECKER_AGENT_SECRET: ENC[AES256_GCM,data:lSLgMHTj5l8dgRFymmuB8fij7fzthT7P1MHBv9wC77E=,iv:PiduBkDdNRb9nqW8hY6oEU+botCkc+kDNCE7p95dntE=,tag:njeso5s8MjTLHHBBuxgvjg==,type:str]
                WOODPECKER_BACKEND: kubernetes
                WOODPECKER_BACKEND_K8S_NAMESPACE: woodpecker
                WOODPECKER_BACKEND_K8S_VOLUME_SIZE: 10G
                WOODPECKER_BACKEND_K8S_STORAGE_RWX: true
                WOODPECKER_CONNECT_RETRY_COUNT: "3"
        server:
            statefulSet:
                replicaCount: 1
            env:
                WOODPECKER_HOST: https://ci.omni.ms
                WOODPECKER_ADMIN: woodpecker,admin,webmaster,andrei
                WOODPECKER_ORGS: omnilium
                WOODPECKER_OPEN: false
                WOODPECKER_AGENT_SECRET: ENC[AES256_GCM,data:Q/ph/4cNGfd67BSem1foO+69KDOHBwwAP3mdDhVwjms=,iv:3uVInVh80WYYsMXLA/g5fR7GVyozuna/q/2K8AqyUZI=,tag:MzTzzXF9Tf9rVg/SM6d1Vg==,type:str]
                WOODPECKER_DATABASE_DRIVER: postgres
                WOODPECKER_DATABASE_DATASOURCE: ENC[AES256_GCM,data:9IAfO6/JsLzd2w0pSKPbEC56rkrVtSZ/ED5dG+GdUI1wqIKJ7cmrjg7TAFrOoVNB3WTg/IybJd+E5xV1dCot3YEddrVfYdbUvOlNk0rU9HOKrD5b5Xr6FJrToAUAcZzH7rEgkTz+fR8IjUIFCio4EPew3VqGU2U9Om0AEC8oa49LhSsQoXYy3EBSzZ9IEw==,iv:hoWgz7nM9FUDvi6l7h1nPad7Sqzu5PpSQO6d660FUH8=,tag:OI4rFFlht02R2itd2ZFl8g==,type:str]
                WOODPECKER_GITEA: true
                WOODPECKER_GITEA_URL: https://git.omni.ms
                WOODPECKER_GITEA_CLIENT: 1fc71f6c-48c2-4334-ac37-4dff1203a7c2
                WOODPECKER_GITEA_SECRET: ENC[AES256_GCM,data:UxDIJr/bv2jidi/ht5f/SmBqH/tiDwOeRdr7zFgEsiA6ujtHAYQSFfbNaS4pW67exw4cREC+50A=,iv:StecV81xlD8hywEjLDYXhbGPYVmn/AOaiToT73RN2jY=,tag:180Piuxmv0K5ygObrAc3tQ==,type:str]
                WOODPECKER_GITEA_SKIP_VERIFY: true
            persistentVolume:
                storageClass: solid-state-replicated
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-04-14T18:43:29Z"
    mac: ENC[AES256_GCM,data:S6YAlZXu4/tkPihHDDH0PzyVSJ4fynWBuzzdq+HeFTZzHoGiS5aOxKhExQ1LECcHXTtLlnbHts9dIcu5PNEtJ3OPDV9tV50Z25cSGkD95o0hiqKO+DGPkPGU1RizjtFd3Pot7rMcBSK3u652aSldOaGiLZGAmCWpdV7b6D2IlU0=,iv:surGj/kORYCm7vMAiyNFJ/FKPtwlOo4r/M2vq6KB9EA=,tag:Fg6CQzc2rTUEwnpTWk7Ndw==,type:str]
    pgp:
        - created_at: "2024-04-14T18:43:29Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4D0dRkdsWQFPUSAwMEdE7vbw/4Vsm56CyDFqweLFiH+FE8npH9n0Wh59ANp7Cs
            JSqi3iXdBoOCHMPOj4hxe44d3N4Lz3Oze+GMuBqTnvjgAe/hzzpsOISpUnCEHgMd
            Ns4hpR9rCH9cM3Fd/t/MMLYGj47Dhgvfue675Q4y01n/ZLI396c13Vn/KbAG1y9x
            jS+K2Y+FHGnomn8niWQRXdRoAQkCEARlwx5gm/fQLMRVltqicPRtMMpigOwJlvEw
            rcfdzh6BHKQ87cNYTS2r9G8RCRR52jTnfo2oAW6Bea0ZnYcFHilonRh6/ot6dZFS
            kBuem4nyHlrLYLAzp3JBhs9kCxkbuVqxAwk=
            =qBEN
            -----END PGP MESSAGE-----
          fp: 0F003E832B1DA1A11CA9F206712F90FA248BBBC2
        - created_at: "2024-04-14T18:43:29Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hJ4DLG005yzvDc8SAwMERFnf7uzQIZaQjdgBuJHTgZs3oyhoTqvwuEDa/jsMfDv7
            qfmqiWzvlHNB7msXy8T+96Eirq8sQflt5sWSVIIMnaO0Vxjt+nZ/+aBB0gwrg7sE
            83v9JV6vX27JUjXmOgyAMFWkgsK/C2A2LLgE/6gPFQWgDL/7n0rr2RJMwpesht9B
            SOokVLuGmDqvu9w43npYvNRoAQkCEC6qELBp7v87S74ITD+4hG4W8WpyKli7jYC8
            37j/xn+qlBBQcy33EjdNoqJEpI7e0+MZkZJASR7GGjkEikhSVkfXpPg8pzcCcpvT
            DV7J5tJtPb6Fghsw+28sFOqR44Y71aLgAqU=
            =jypo
            -----END PGP MESSAGE-----
          fp: 1918B94484C52CDE42CA1B87E7812096B8DA4A52
    encrypted_regex: ^(WOODPECKER_AGENT_SECRET|WOODPECKER_DATABASE_DATASOURCE|WOODPECKER_GITEA_SECRET)$
    version: 3.8.1
